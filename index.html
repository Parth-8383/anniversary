<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For My Waffle â¤ï¸</title>

  <style>
    :root{
      --bg:#a9ddff;
      --accent:#ff4fa8;
      --card-bg:#fff;
      --text:#333;
      --max-popup:480px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:"Poppins",sans-serif;
      background:linear-gradient(180deg,#bfe9ff 0%,#a9ddff 100%);
      text-align:center;
      padding:28px 16px 60px;
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
    }

    h1{
      color:white;
      font-size:28px;
      margin:14px 0 18px;
      font-weight:700;
      text-shadow:0 4px 14px rgba(0,0,0,0.12);
      line-height:1.15;
      animation: floatText 3s infinite ease-in-out;
    }
    @keyframes floatText{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

    .flowers{
      width:82%;
      max-width:460px;
      display:block;
      margin:8px auto 14px;
      border-radius:14px;
      box-shadow:0 12px 30px rgba(0,0,0,0.12);
      animation:flowerBounce 3s ease-in-out infinite;
    }
    @keyframes flowerBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

    .open-btn{
      margin-top:12px;
      background:var(--accent);
      color:#fff;
      border:none;
      padding:14px 32px;
      border-radius:40px;
      font-size:18px;
      cursor:pointer;
      box-shadow:0 10px 26px rgba(255,79,168,0.15);
      transition: transform .12s ease;
    }
    .open-btn:active{transform:scale(.98)}

    /* hearts */
    #hearts{position:fixed;inset:0;pointer-events:none;z-index:1}
    .heart{position:absolute;color:#ff4fa8;font-size:22px;opacity:.95;will-change:transform,opacity}

    /* popup */
    .popup{
      display:none; /* hidden by default */
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.45);
      z-index:50;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .popup-content{
      background:var(--card-bg);
      width:92%;
      max-width:var(--max-popup);
      padding:20px;
      border-radius:16px;
      position:relative;
      box-shadow:0 22px 50px rgba(0,0,0,0.2);
      max-height:90vh;
      overflow:auto;
      text-align:left;
    }
    .close{
      position:absolute;right:12px;top:8px;font-size:26px;border:none;background:transparent;cursor:pointer;color:#666;
    }
    .selfie{
      display:block;width:86%;max-width:340px;margin:10px auto;border-radius:12px;object-fit:cover;box-shadow:0 10px 30px rgba(0,0,0,0.12);
    }
    .letter{
      font-size:16px;line-height:1.55;color:var(--text);white-space:pre-wrap;padding:6px 4px;text-align:left;
    }

    /* small screens tuning */
    @media(min-width:720px){
      h1{font-size:34px}
      .open-btn{font-size:19px;padding:15px 36px}
      .letter{font-size:17px}
    }
  </style>
</head>
<body>

  <!-- hearts -->
  <div id="hearts" aria-hidden="true"></div>

  <!-- background music -->
  <audio id="bgMusic" autoplay loop>
    <source src="music.mp3" type="audio/mp3">
  </audio>

  <h1>So many flowers but<br>my favourite one is you ğŸ¤­</h1>

  <img src="flowers.png" alt="bouquet" class="flowers">

  <button class="open-btn" id="openSpecial">Open Special Letter ğŸ’Œ</button>

  <!-- LETTER POPUP -->
  <div class="popup" id="popup" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="popup-content" role="document">
      <button class="close" id="closePopup" aria-label="Close">Ã—</button>

      <img src="yourphoto.jpg" alt="us" class="selfie">

      <div class="letter" id="letterText">
Happy Anniversary Babu (My Waffle) â¤ï¸ğŸ’‹

Finally our day is hereâ€¦ kabhi socha tha ki main itna pagal ho jaunga tere liye?  
Par kya karuâ€¦ tu ho hi itni cute, itni sweet, itni meriâ€¦  
ki zindagi bhar pakad ke rakhna hai tujheâ€¦  
jayegi tu jaha auga mai waha. ğŸ¤­ğŸ’

You mean the entire world to me riiâ€¦ I love you in ways you canâ€™t even imagine.  
Tujhe dekhte hi My Dil Goes Mmmmmm ğŸ˜˜ğŸ”¥

Honeyâ€¦ every single moment with you feels magical.  
You make my heart smile in ways I never knew were possible.  
Youâ€™re my comfort, my chaos, my peace, my everything. ğŸ’—âœ¨

I love you more than words, more than time,  
more than every â€œI love youâ€ Iâ€™ve ever said.  
Iâ€™m yours, alwaysâ€¦ foreverâ€¦ endlessly. â¤ï¸ğŸ’‹ğŸ’‹

â€” Your Smolu ğŸ’•
      </div>
    </div>
  </div>

  <script>
    // Robust, conflict-free popup wiring
    (function(){
      const openBtn = document.getElementById('openSpecial');
      const popup = document.getElementById('popup');
      const closeBtn = document.getElementById('closePopup');
      const bgMusic = document.getElementById('bgMusic');

      function showPopup(){
        popup.style.display = 'flex';
        popup.setAttribute('aria-hidden','false');
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
        // try to play music (fix mobile)
        bgMusic && bgMusic.play().catch(()=>{});
      }
      function hidePopup(){
        popup.style.display = 'none';
        popup.setAttribute('aria-hidden','true');
        document.documentElement.style.overflow = '';
        document.body.style.overflow = '';
      }

      // attach handlers safely
      openBtn && openBtn.addEventListener('click', showPopup);
      closeBtn && closeBtn.addEventListener('click', hidePopup);
      // close when clicking outside popup-content
      popup && popup.addEventListener('click', function(e){
        if(e.target === popup) hidePopup();
      });
      // close on Esc
      document.addEventListener('keydown', function(e){
        if(e.key === 'Escape' && popup.style.display === 'flex') hidePopup();
      });

      // play music on first user interaction (iOS)
      function resumeAudio(){
        if(bgMusic && bgMusic.paused) bgMusic.play().catch(()=>{});
        window.removeEventListener('click', resumeAudio);
        window.removeEventListener('touchstart', resumeAudio);
      }
      window.addEventListener('click', resumeAudio);
      window.addEventListener('touchstart', resumeAudio);

      // floating hearts generator
      const heartsRoot = document.getElementById('hearts');
      function createHeart(){
        const el = document.createElement('div');
        el.className = 'heart';
        el.textContent = 'ğŸ’–';
        const size = 16 + Math.random()*22;
        el.style.fontSize = size+'px';
        el.style.left = Math.random()*92+'vw';
        el.style.bottom = '-8vh';
        const duration = 3500 + Math.random()*3000;
        el.style.transition = `transform ${duration}ms linear, opacity ${duration}ms linear`;
        heartsRoot.appendChild(el);
        requestAnimationFrame(()=>{
          el.style.transform = `translateY(-110vh) scale(${1 + Math.random()*0.8})`;
          el.style.opacity = '0';
        });
        setTimeout(()=> el.remove(), duration+200);
      }
      setInterval(createHeart, 420);

      // Expose for debugging if needed
      window._openLetter = showPopup;
      window._closeLetter = hidePopup;
    })();
  </script>
</body>
</html>
